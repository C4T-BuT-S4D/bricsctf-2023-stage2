import{P as q}from"../chunks/public.550f299c.js";import{s as J,a as E,f as m,c as I,g as v,h as j,d as y,u as F,j as b,i as P,v as c,B as L,z as O,D as K,E as Q,l as x,m as N,k as W,n as X,F as Y}from"../chunks/scheduler.cc50fc79.js";import{e as M}from"../chunks/each.e59479a4.js";import{S as Z,i as $}from"../chunks/index.bc93388f.js";import{i as ee}from"../chunks/navigation.0fbf9e82.js";async function te({fetch:s}){const e=await s(`${q}/api/file`,{credentials:"include"});return e.ok?{files:(await e.json()).files}:{files:[]}}const ce=Object.freeze(Object.defineProperty({__proto__:null,load:te},Symbol.toStringTag,{value:"Module"}));function R(s,e,t){const i=s.slice();return i[6]=e[t],i}function G(s){let e,t;return{c(){e=m("p"),t=x(s[0]),this.h()},l(i){e=v(i,"P",{style:!0});var r=j(e);t=N(r,s[0]),r.forEach(y),this.h()},h(){W(e,"color","red")},m(i,r){P(i,e,r),c(e,t)},p(i,r){r&1&&X(t,i[0])},d(i){i&&y(e)}}}function H(s){let e,t=s[6]+"",i,r,n,_,p,k;return{c(){e=m("div"),i=x(t),r=x(":"),n=m("br"),_=E(),p=m("img"),this.h()},l(d){e=v(d,"DIV",{});var o=j(e);i=N(o,t),r=N(o,":"),n=v(o,"BR",{}),_=I(o),p=v(o,"IMG",{src:!0,alt:!0,height:!0}),o.forEach(y),this.h()},h(){Y(p.src,k=q+"/api/file/"+s[6])||b(p,"src",k),b(p,"alt",s[6]),b(p,"height","100")},m(d,o){P(d,e,o),c(e,i),c(e,r),c(e,n),c(e,_),c(e,p)},p:O,d(d){d&&y(e)}}}function le(s){let e,t,i,r,n,_,p="See images you uploaded:",k,d,o,g,V,D,z="Upload",B,w,T,A,u=s[0]&&G(s),C=M(s[2]),f=[];for(let l=0;l<C.length;l+=1)f[l]=H(R(s,C,l));return{c(){u&&u.c(),e=E(),t=m("div"),i=m("div"),r=E(),n=m("div"),_=m("h3"),_.textContent=p,k=E();for(let l=0;l<f.length;l+=1)f[l].c();d=E(),o=m("div"),g=m("input"),V=E(),D=m("button"),D.textContent=z,B=E(),w=m("div"),this.h()},l(l){u&&u.l(l),e=I(l),t=v(l,"DIV",{class:!0});var h=j(t);i=v(h,"DIV",{}),j(i).forEach(y),r=I(h),n=v(h,"DIV",{});var a=j(n);_=v(a,"H3",{"data-svelte-h":!0}),F(_)!=="svelte-1lreuji"&&(_.textContent=p),k=I(a);for(let U=0;U<f.length;U+=1)f[U].l(a);d=I(a),o=v(a,"DIV",{class:!0});var S=j(o);g=v(S,"INPUT",{accept:!0,id:!0,name:!0,type:!0}),S.forEach(y),V=I(a),D=v(a,"BUTTON",{"data-svelte-h":!0}),F(D)!=="svelte-vlyxan"&&(D.textContent=z),a.forEach(y),B=I(h),w=v(h,"DIV",{}),j(w).forEach(y),h.forEach(y),this.h()},h(){b(g,"accept","image/png, image/jpeg"),b(g,"id","image"),b(g,"name","image"),b(g,"type","file"),b(o,"class","group"),b(t,"class","grid")},m(l,h){u&&u.m(l,h),P(l,e,h),P(l,t,h),c(t,i),c(t,r),c(t,n),c(n,_),c(n,k);for(let a=0;a<f.length;a+=1)f[a]&&f[a].m(n,null);c(n,d),c(n,o),c(o,g),c(n,V),c(n,D),c(t,B),c(t,w),T||(A=[L(g,"change",s[5]),L(D,"click",s[3])],T=!0)},p(l,[h]){if(l[0]?u?u.p(l,h):(u=G(l),u.c(),u.m(e.parentNode,e)):u&&(u.d(1),u=null),h&4){C=M(l[2]);let a;for(a=0;a<C.length;a+=1){const S=R(l,C,a);f[a]?f[a].p(S,h):(f[a]=H(S),f[a].c(),f[a].m(n,d))}for(;a<f.length;a+=1)f[a].d(1);f.length=C.length}},i:O,o:O,d(l){l&&(y(e),y(t)),u&&u.d(l),K(f,l),T=!1,Q(A)}}}function ae(s,e,t){let i,r,{data:n}=e,_=n.files;async function p(){let d=new FormData;d.append("image",r[0]);const o=await fetch(`${q}/api/file/upload`,{method:"POST",body:d,credentials:"include"});if(o.ok)await ee();else try{const g=await o.json();t(0,i=g.error)}catch{t(0,i=await o.text())}}function k(){r=this.files,t(1,r)}return s.$$set=d=>{"data"in d&&t(4,n=d.data)},[i,r,_,p,n,k]}class fe extends Z{constructor(e){super(),$(this,e,ae,le,J,{data:4})}}export{fe as component,ce as universal};
