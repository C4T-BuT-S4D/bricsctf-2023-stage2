import{s as O,f as p,a as y,g as f,h as g,d as m,c as b,u as E,j as L,i as I,v as l,B as k,C as z,z as T,l as V,m as A,k as B,n as H}from"../chunks/scheduler.cc50fc79.js";import{S as M,i as U}from"../chunks/index.bc93388f.js";import{g as j,i as F}from"../chunks/navigation.0fbf9e82.js";import{P as J}from"../chunks/public.550f299c.js";function D(d){let e,r;return{c(){e=p("p"),r=V(d[0]),this.h()},l(a){e=f(a,"P",{style:!0});var t=g(e);r=A(t,d[0]),t.forEach(m),this.h()},h(){B(e,"color","red")},m(a,t){I(a,e,t),l(e,r)},p(a,t){t&1&&H(r,a[0])},d(a){a&&m(e)}}}function N(d){let e,r,a,t,c,v="Let's login!",_,u,i,S=`<div class="grid"><div><label for="username">Username
                        <input type="text" id="username" name="username" placeholder="user"/></label></div> <div><label for="password">Password
                        <input type="password" id="password" name="password" placeholder="password"/></label></div></div> <input type="submit" value="Login"/>`,C,w,P,x,s=d[0]&&D(d);return{c(){e=p("div"),r=p("div"),a=y(),t=p("div"),c=p("h3"),c.textContent=v,_=y(),s&&s.c(),u=y(),i=p("form"),i.innerHTML=S,C=y(),w=p("div"),this.h()},l(o){e=f(o,"DIV",{class:!0});var n=g(e);r=f(n,"DIV",{}),g(r).forEach(m),a=b(n),t=f(n,"DIV",{});var h=g(t);c=f(h,"H3",{"data-svelte-h":!0}),E(c)!=="svelte-5zz3dh"&&(c.textContent=v),_=b(h),s&&s.l(h),u=b(h),i=f(h,"FORM",{method:!0,"data-svelte-h":!0}),E(i)!=="svelte-1vdxz1r"&&(i.innerHTML=S),h.forEach(m),C=b(n),w=f(n,"DIV",{}),g(w).forEach(m),n.forEach(m),this.h()},h(){L(i,"method","POST"),L(e,"class","grid")},m(o,n){I(o,e,n),l(e,r),l(e,a),l(e,t),l(t,c),l(t,_),s&&s.m(t,null),l(t,u),l(t,i),l(e,C),l(e,w),P||(x=k(i,"submit",z(d[1])),P=!0)},p(o,[n]){o[0]?s?s.p(o,n):(s=D(o),s.c(),s.m(t,u)):s&&(s.d(1),s=null)},i:T,o:T,d(o){o&&m(e),s&&s.d(),P=!1,x()}}}function R(d,e,r){let a;async function t(c){const v=new FormData(c.currentTarget);let _=v.get("username"),u=v.get("password");try{const i=await fetch(`${J}/api/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:_,password:u})});if(i.ok){await j("/",{invalidateAll:!0});return}r(0,a=await i.text());try{r(0,a=JSON.parse(a).error)}catch{}}catch(i){r(0,a=i.toString())}await F()}return[a,t]}class Q extends M{constructor(e){super(),U(this,e,R,N,O,{})}}export{Q as component};
