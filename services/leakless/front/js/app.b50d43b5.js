(function(){"use strict";var e={6950:function(e,t,n){var o=n(9242),a=n(3396);function r(e,t,n,o,r,l){const s=(0,a.up)("router-view"),u=(0,a.up)("AppLayout");return(0,a.wg)(),(0,a.j4)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s)])),_:1})}function l(e,t,n,o,r,l){const s=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("nav",null,[(0,a._)("ul",null,[(0,a._)("li",null,[(0,a._)("strong",null,[(0,a.Wm)(s,{to:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)("leakless")])),_:1})])]),(0,a._)("li",null,[(0,a._)("strong",null,[(0,a.Wm)(s,{to:"/companies"},{default:(0,a.w5)((()=>[(0,a.Uk)("companies")])),_:1})])])]),(0,a._)("ul",null,[(0,a._)("li",null,[l.loggedIn?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(s,{key:0,to:"/register"},{default:(0,a.w5)((()=>[(0,a.Uk)("register")])),_:1}))]),(0,a._)("li",null,[l.loggedIn?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(s,{key:0,to:"/login"},{default:(0,a.w5)((()=>[(0,a.Uk)("login")])),_:1}))]),(0,a._)("li",null,[l.loggedIn?((0,a.wg)(),(0,a.j4)(s,{key:0,to:"/me"},{default:(0,a.w5)((()=>[(0,a.Uk)("my company")])),_:1})):(0,a.kq)("",!0)]),(0,a._)("li",null,[l.loggedIn?((0,a.wg)(),(0,a.j4)(s,{key:0,to:"/",onClick:l.logout,role:"button"},{default:(0,a.w5)((()=>[(0,a.Uk)("logout")])),_:1},8,["onClick"])):(0,a.kq)("",!0)])])]),(0,a.WI)(e.$slots,"default")],64)}n(560);var s={computed:{loggedIn(){return null!=this.token}},methods:{logout(){localStorage.removeItem("token"),this.token=null,this.$router.push({name:"index"})}},data:function(){return{token:localStorage.token}}},u=n(89);const i=(0,u.Z)(s,[["render",l]]);var c=i,d={components:{AppLayout:c}};const m=(0,u.Z)(d,[["render",r]]);var p=m,h=n(2483);const g=(0,a._)("h2",null,"Leakless",-1),y=(0,a._)("p",null," Leakless is the premier service to publish documents in lengthy court proceedings, automatically highlighting and sensoring sensitive company information. ",-1),w=[g,y];function _(e,t,n,o,r,l){return(0,a.wg)(),(0,a.iD)("article",null,w)}var f={};const v=(0,u.Z)(f,[["render",_]]);var k=v;const b={class:"container"},I={class:"grid"},D=(0,a._)("hgroup",null,[(0,a._)("h1",null,"login"),(0,a._)("h2",null,"login with your company")],-1),S=(0,a._)("button",{type:"submit",class:"contrast"},"Login",-1),$=(0,a._)("div",null,null,-1);function z(e,t,n,r,l,s){return(0,a.wg)(),(0,a.iD)("main",b,[(0,a._)("article",I,[(0,a._)("div",null,[D,(0,a._)("form",{onSubmit:t[3]||(t[3]=(...e)=>s.register&&s.register(...e))},[(0,a.wy)((0,a._)("input",{type:"text",name:"login","onUpdate:modelValue":t[0]||(t[0]=t=>e.login=t),placeholder:"login","aria-label":"login",autocomplete:"nickname",required:""},null,512),[[o.nr,e.login]]),(0,a.wy)((0,a._)("input",{type:"text",name:"companyName","onUpdate:modelValue":t[1]||(t[1]=t=>e.companyName=t),placeholder:"company name","aria-label":"company name",autocomplete:"nickname",required:""},null,512),[[o.nr,e.companyName]]),(0,a.wy)((0,a._)("input",{type:"password",name:"password","onUpdate:modelValue":t[2]||(t[2]=t=>e.password=t),placeholder:"password","aria-label":"password",autocomplete:"current-password",required:""},null,512),[[o.nr,e.password]]),S],32)]),$])])}var q=n(4161),Z={methods:{async register(e){e.preventDefault();try{let e=await q.Z.post("register",{login:this.login,name:this.companyName,password:this.password});localStorage.token=e.data.message.jwt,this.token=localStorage.token,this.$router.push({name:"index"})}catch(t){console.log(t),this.$router.push({name:"error",query:{error:JSON.stringify(t.response.data.message)}})}}},data:function(){return{login:null,companyName:null,password:null}}};const U=(0,u.Z)(Z,[["render",z]]);var x=U;const O={class:"container"},N={class:"grid"},C=(0,a._)("hgroup",null,[(0,a._)("h1",null,"login"),(0,a._)("h2",null,"login with your company")],-1),j=(0,a._)("button",{type:"submit",class:"contrast"},"Login",-1),H=(0,a._)("div",null,null,-1);function J(e,t,n,r,l,s){return(0,a.wg)(),(0,a.iD)("main",O,[(0,a._)("article",N,[(0,a._)("div",null,[C,(0,a._)("form",{onSubmit:t[2]||(t[2]=(...e)=>s.doLogin&&s.doLogin(...e))},[(0,a.wy)((0,a._)("input",{type:"text",name:"login","onUpdate:modelValue":t[0]||(t[0]=t=>e.login=t),placeholder:"login","aria-label":"login",autocomplete:"nickname",required:""},null,512),[[o.nr,e.login]]),(0,a.wy)((0,a._)("input",{type:"password",name:"password","onUpdate:modelValue":t[1]||(t[1]=t=>e.password=t),placeholder:"password","aria-label":"password",autocomplete:"current-password",required:""},null,512),[[o.nr,e.password]]),j],32)]),H])])}var L={methods:{async doLogin(e){e.preventDefault();try{let e=await q.Z.post("login",{login:this.login,name:this.name,password:this.password});localStorage.token=e.data.message.jwt,this.token=localStorage.token,this.$router.push({name:"index"})}catch(t){console.log(t),this.$router.push({name:"error",query:{error:JSON.stringify(t.response.data.message)}})}}},data:function(){return{login:null,password:null}}};const W=(0,u.Z)(L,[["render",J]]);var B=W,Y=n(7139);const V={class:"container"},A={class:"grid"},T=(0,a._)("h1",null,"error",-1);function K(e,t,n,o,r,l){return(0,a.wg)(),(0,a.iD)("main",V,[(0,a._)("article",A,[(0,a._)("div",null,[T,(0,a._)("mark",null,(0,Y.zw)(this.$route.query["error"]),1)])])])}var E={};const M=(0,u.Z)(E,[["render",K]]);var P=M;const F={role:"grid"},R=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{scope:"col"},"id"),(0,a._)("th",{scope:"col"},"name"),(0,a._)("th",{scope:"col"},"login"),(0,a._)("th",{scope:"col"},"view company"),(0,a._)("th",{scope:"col"},"publish document")])],-1),G={scope:"row"};function Q(e,t,n,o,r,l){const s=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("table",F,[R,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.companies,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id},[(0,a._)("th",G,(0,Y.zw)(t.id),1),(0,a._)("td",null,(0,Y.zw)(t.name),1),(0,a._)("td",null,(0,Y.zw)(t.login),1),(0,a._)("td",null,[e.loggedIn?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(s,{key:0,to:{name:"company",params:{companyId:t.id}}},{default:(0,a.w5)((()=>[(0,a.Uk)("view")])),_:2},1032,["to"]))]),(0,a._)("td",null,[e.loggedIn?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(s,{key:0,to:{name:"putDocument",params:{companyId:t.id}}},{default:(0,a.w5)((()=>[(0,a.Uk)("publish")])),_:2},1032,["to"]))])])))),128))])])}var X={async mounted(){await this.getCompanies()},methods:{async getCompanies(){try{let e=await q.Z.get("companies?offset=0&limit=100");this.companies=e.data.message.companies}catch(e){console.log(e),this.$router.push({name:"error",query:{error:JSON.stringify(e.response.data.message)}})}}},data:function(){return{companies:[]}}};const ee=(0,u.Z)(X,[["render",Q]]);var te=ee;const ne=(0,a._)("h2",null," documents: ",-1),oe={role:"grid"},ae=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{scope:"col"},"id"),(0,a._)("th",null,"sanitized")])],-1),re={scope:"row"};function le(e,t,n,o,r,l){const s=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("h1",null,(0,Y.zw)(e.company.name),1),(0,a._)("h2",null,(0,Y.zw)(e.company.login),1),ne,(0,a._)("table",oe,[ae,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.company.documents,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.toString()},[(0,a._)("th",re,(0,Y.zw)(e),1),(0,a._)("td",null,[(0,a.Wm)(s,{to:{name:"sanitized",params:{documentId:e}}},{default:(0,a.w5)((()=>[(0,a.Uk)("view")])),_:2},1032,["to"])])])))),128))])]),(0,a.Wm)(s,{to:{name:"putDocument",params:{companyId:e.company.id+1-1}},role:"button"},{default:(0,a.w5)((()=>[(0,a.Uk)("+")])),_:1},8,["to"])],64)}var se={async mounted(){await this.getCompany()},methods:{async getCompany(){try{let e=await q.Z.get("company/"+this.companyId);this.company=e.data.message}catch(e){console.log(e),this.$router.push({name:"error",query:{error:JSON.stringify(e.response.data.message)}})}}},data:function(){return{company:[],companyId:this.$route.params["companyId"]}}};const ue=(0,u.Z)(se,[["render",le]]);var ie=ue;const ce={class:"container"},de={class:"grid"};function me(e,t,n,o,r,l){return(0,a.wg)(),(0,a.iD)("main",ce,[(0,a._)("article",de,[(0,a._)("div",null,[(0,a._)("h1",null,(0,Y.zw)(e.document.id),1),(0,a._)("p",null,(0,Y.zw)(e.document.text),1)])])])}var pe={async mounted(){await this.getDocument()},methods:{async getDocument(){try{let e=await q.Z.get("doc/"+this.documentId+"/sanitized");this.document=e.data.message}catch(e){console.log(e),this.$router.push({name:"error",query:{error:JSON.stringify(e.response.data.message)}})}}},data:function(){return{document:[],documentId:this.$route.params["documentId"]}}};const he=(0,u.Z)(pe,[["render",me]]);var ge=he;const ye={class:"container"},we={class:"grid"};function _e(e,t,n,o,r,l){return(0,a.wg)(),(0,a.iD)("main",ye,[(0,a._)("article",we,[(0,a._)("div",null,[(0,a._)("h1",null,(0,Y.zw)(e.document.id),1),(0,a._)("p",null,(0,Y.zw)(e.document.text),1)])])])}var fe={async mounted(){await this.getCompany()},methods:{async getDocument(){try{let e=await q.Z.get(`doc/${this.documentId}`,{headers:{Authorization:`Bearer ${localStorage.token}`}});this.document=e.data.message}catch(e){console.log(e),this.$router.push({name:"error",query:{error:JSON.stringify(e.response.data.message)}})}}},data:function(){return{document:[],documentId:this.$route.params["documentId"]}}};const ve=(0,u.Z)(fe,[["render",_e]]);var ke=ve;const be={class:"container"},Ie={class:"grid"},De=(0,a._)("hgroup",null,[(0,a._)("h1",null,"add a secret")],-1),Se=(0,a._)("button",{type:"submit",class:"contrast"},"add",-1),$e=(0,a._)("div",null,null,-1);function ze(e,t,n,r,l,s){return(0,a.wg)(),(0,a.iD)("main",be,[(0,a._)("article",Ie,[(0,a._)("div",null,[De,(0,a._)("form",{onSubmit:t[1]||(t[1]=(...e)=>s.addSecret&&s.addSecret(...e))},[(0,a.wy)((0,a._)("input",{type:"text",name:"secret","onUpdate:modelValue":t[0]||(t[0]=t=>e.secret=t),placeholder:"secret","aria-label":"secret",required:""},null,512),[[o.nr,e.secret]]),Se],32)]),$e])])}var qe={methods:{async addSecret(e){e.preventDefault();try{await q.Z.put("/me/secret",{secret:this.secret},{headers:{Authorization:`Bearer ${localStorage.token}`}}),this.$router.push({name:"me"})}catch(t){console.log(t),this.$router.push({name:"error",query:{error:JSON.stringify(t.response.data.message)}})}}},data:function(){return{secret:null}}};const Ze=(0,u.Z)(qe,[["render",ze]]);var Ue=Ze;const xe={class:"container"},Oe={class:"grid"},Ne=(0,a._)("hgroup",null,[(0,a._)("h1",null,"add a document")],-1),Ce=(0,a._)("button",{type:"submit",class:"contrast"},"add",-1),je=(0,a._)("div",null,null,-1),He=(0,a._)("h2",null,"potential secrets so far:",-1),Je={role:"grid"};function Le(e,t,n,r,l,s){return(0,a.wg)(),(0,a.iD)("main",xe,[(0,a._)("article",Oe,[(0,a._)("div",null,[Ne,(0,a._)("form",{onSubmit:t[2]||(t[2]=(...e)=>s.addDocument&&s.addDocument(...e))},[(0,a.wy)((0,a._)("textarea",{type:"textarea",name:"document","onUpdate:modelValue":t[0]||(t[0]=t=>e.document=t),rows:"15",cols:"50",placeholder:"document","aria-label":"document",onChange:t[1]||(t[1]=(...e)=>s.handleTextChange&&s.handleTextChange(...e)),required:""},null,544),[[o.nr,e.document]]),Ce],32)]),je,He,(0,a._)("table",Je,[(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.secrets,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.toString()},[(0,a._)("td",null,(0,Y.zw)(e),1)])))),128))])])])])}var We={async mounted(){await this.getHashes()},methods:{async getHashes(){try{let e=await q.Z.get(`company/${this.companyId}/hashes`,{headers:{Authorization:`Bearer ${localStorage.token}`}});this.hashes=e.data.message,this.hashes.p=BigInt(this.hashes.p),this.hashes.q=BigInt(this.hashes.q)}catch(e){console.log(e),this.$router.push({name:"error",query:{error:JSON.stringify(e.response.data.message)}})}},async addDocument(e){e.preventDefault();let t=this.$route.params["companyId"];try{await q.Z.put(`/company/${this.companyId}/doc`,{text:this.document}),this.$router.push({name:"company",params:{companyId:t}})}catch(n){console.log(n),this.$router.push({name:"error",query:{error:JSON.stringify(n.response.data.message)}})}},async handleTextChange(){function e(e,t,n){let o=1n;while(0n!=t)t%2n==1n&&(o=o*e%n),e=e*e%n,t/=2n;return o}const t=new TextEncoder;let n=t.encode(event.target.value),o=this.hashes,a=new Map,r=[],l=0n;r.push(l);for(let s=0n;s<n.length;s++)l*=o.q,l=(l+BigInt(n[s]))%o.p,r.push(l);for(let s=0n;s<o.hashes.length;s++){let e=BigInt(o.hashes[s].len);null==a.get(e)&&a.set(e,[]),a.get(e).push(o.hashes[s].hash)}this.secrets=[];for(const[s,u]of a)for(let t=0n;t<BigInt(n.length)-s+1n;t++){let n=(o.p+r[t+s]-r[t]*e(o.q,s,o.p)%o.p)%o.p;for(const e of u)e==n&&this.secrets.push(event.target.value.slice(Number(t),Number(t+s)))}}},data:function(){return{secrets:[],secretHashes:[],document:null,companyId:this.$route.params["companyId"]}}};const Be=(0,u.Z)(We,[["render",Le]]);var Ye=Be;const Ve=(0,a._)("h2",null," documents: ",-1),Ae={role:"grid"},Te=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{scope:"col"},"id"),(0,a._)("th",null,"sanitized"),(0,a._)("th",null,"raw")])],-1),Ke={scope:"row"},Ee=(0,a._)("h2",null,"secrets:",-1),Me={role:"grid"},Pe=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{scope:"col"},"id"),(0,a._)("th",null,"secret")])],-1),Fe={scope:"row"};function Re(e,t,n,o,r,l){const s=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Uk)((0,Y.zw)(e.company.id)+" ",1),(0,a._)("h1",null,(0,Y.zw)(e.company.name),1),(0,a._)("h2",null,(0,Y.zw)(e.company.login),1),Ve,(0,a._)("table",Ae,[Te,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.company.documents,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.toString()},[(0,a._)("th",Ke,(0,Y.zw)(e),1),(0,a._)("td",null,[(0,a.Wm)(s,{to:{name:"sanitized",params:{documentId:e}}},{default:(0,a.w5)((()=>[(0,a.Uk)("view")])),_:2},1032,["to"])]),(0,a._)("td",null,[(0,a.Wm)(s,{to:{name:"document",params:{documentId:e}}},{default:(0,a.w5)((()=>[(0,a.Uk)("view")])),_:2},1032,["to"])])])))),128))])]),(0,a.Wm)(s,{to:{name:"putDocument",params:{companyId:e.company.id+1-1}},role:"button"},{default:(0,a.w5)((()=>[(0,a.Uk)("+")])),_:1},8,["to"]),Ee,(0,a._)("table",Me,[Pe,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.company.secrets,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("th",Fe,(0,Y.zw)(e.id),1),(0,a._)("td",null,(0,Y.zw)(e.secret),1)])))),128))])]),(0,a._)("li",null,[(0,a.Wm)(s,{to:"/me/secret",role:"button"},{default:(0,a.w5)((()=>[(0,a.Uk)("+")])),_:1})])],64)}var Ge={async mounted(){await this.getCompany()},methods:{async getCompany(){try{let e=await q.Z.get("/me",{headers:{Authorization:`Bearer ${localStorage.token}`}});this.company=e.data.message}catch(e){console.log(e),this.$router.push({name:"error",query:{error:JSON.stringify(e.response.data.message)}})}}},data:function(){return{company:{}}}};const Qe=(0,u.Z)(Ge,[["render",Re]]);var Xe=Qe;const et=[{path:"/",name:"index",component:k},{path:"/register",name:"register",component:x},{path:"/login",name:"login",component:B},{path:"/error",name:"error",component:P},{path:"/companies",name:"companies",component:te},{path:"/company/:companyId",name:"company",component:ie},{path:"/doc/:documentId/sanitized",name:"sanitized",component:ge},{path:"/doc/:documentId",name:"document",component:ke},{path:"/me",name:"me",component:Xe},{path:"/me/secret",name:"putSecret",component:Ue},{path:"/company/:companyId/doc",name:"putDocument",component:Ye}],tt=(0,h.p7)({history:(0,h.r5)(),routes:et});var nt=tt;let ot="";ot=window.location.origin;const at=ot,rt=`${at}/api`;q.Z.defaults.baseURL=rt,q.Z.defaults.withCredentials=!0,(0,o.ri)(p).use(nt).mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,r){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],r=e[c][2];for(var s=!0,u=0;u<o.length;u++)(!1&r||l>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[u])}))?o.splice(u--,1):(s=!1,r<l&&(l=r));if(s){e.splice(c--,1);var i=a();void 0!==i&&(t=i)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,a,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,r,l=o[0],s=o[1],u=o[2],i=0;if(l.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)var c=u(n)}for(t&&t(o);i<l.length;i++)r=l[i],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},o=self["webpackChunkleakless"]=self["webpackChunkleakless"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(6950)}));o=n.O(o)})();
//# sourceMappingURL=app.b50d43b5.js.map